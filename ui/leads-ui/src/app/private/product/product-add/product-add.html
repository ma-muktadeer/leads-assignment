<div class="modal-content modern-modal">
  <div class="modal-header gradient-header">
    <div class="header-content">
      <div class="header-icon">
        <i class="bi bi-box-seam"></i>
      </div>
      <div class="header-text">
        <h4 class="modal-title">{{ isEdit() ? 'Edit Product' : 'Add New Product' }}</h4>
        <p class="modal-subtitle">{{ isEdit() ? 'Update product information' : 'Fill in the details to create a new
          product' }}</p>
      </div>
    </div>
    <button type="button" class="btn-close btn-close-white" (click)="close()"></button>
  </div>

  <div class="modal-body modern-body">
    <form (ngSubmit)="submit()" #productForm="ngForm">
      <div class="form-container">
        <!-- Product Details Section -->
        <div class="section-header">
          <i class="bi bi-info-circle-fill"></i>
          <span>Product Details</span>
        </div>

        <div class="row g-4">
          <div class="col-md-12">
            <div class="form-group modern-input">
              <label class="form-label">
                <i class="bi bi-pencil-fill label-icon"></i>
                Product Title
              </label>
              <input name="title" [(ngModel)]="product().title" required class="form-control"
                placeholder="Enter product name" />
              <div class="input-underline"></div>
            </div>
          </div>

          <div class="col-md-6">
            <div class="form-group modern-input">
              <label class="form-label">
                <i class="bi bi-currency-dollar label-icon"></i>
                Price
              </label>
              <input type="number" name="price" [(ngModel)]="product().price" required class="form-control"
                placeholder="0.00" step="0.01" />
              <div class="input-underline"></div>
            </div>
          </div>

          <div class="col-md-6">
            <div class="form-group modern-input">
              <label class="form-label">
                <i class="bi bi-tag-fill label-icon"></i>
                Category
              </label>
              <select name="category" [(ngModel)]="product().category" class="form-control">
                <option value="" [selected]="product().category === ''" disabled>Select Category</option>
                @for (item of itemList(); track $index) {
                <option [value]="item.value" [selected]="product().category === item.value">
                  {{ item.name }}
                </option>
                }
              </select>
              <div class="input-underline"></div>
            </div>
          </div>

          <div class="col-md-12">
            <div class="form-group modern-input">
              <label class="form-label">
                <i class="bi bi-text-paragraph label-icon"></i>
                Description
              </label>
              <textarea name="description" [(ngModel)]="product().description" class="form-control" rows="4"
                placeholder="Provide a detailed description of the product"></textarea>
              <div class="input-underline"></div>
            </div>
          </div>
          <div class="col-md-12">
            <div class="form-group modern-input">
              <label class="form-label">
                <i class="bi bi-image label-icon"></i>
                Image
              </label>
              <input type="url" name="image" [(ngModel)]="product().image" class="form-control"
                placeholder="https://example.com/image.jpg" />
              <div class="input-underline"></div>
            </div>
          </div>
        </div>

        <div class="section-header mt-4">
          <i class="bi bi-image-fill"></i>
          <span>Product Image Preview</span>
        </div>

        <div class="image-preview-container">
          @if (product()?.image) {
          <div class="preview-wrapper">
            <img [src]="product()?.image" class="preview-image" [alt]="product()?.title" />
            <div class="image-overlay">
              <i class="bi bi-check-circle-fill"></i>
            </div>
          </div>
          } @else {
          <div class="placeholder-image">
            <div class="placeholder-icon">
              <i class="bi bi-image"></i>
            </div>
            <p class="placeholder-text">No image available</p>
            <small class="placeholder-hint">Add an image URL to see preview</small>
          </div>
          }
        </div>
        <div class="action-buttons">
          <button type="submit" class="btn btn-primary modern-btn-primary" [disabled]="saving() || productForm.invalid">
            <i
              [class]="'bi ' + (saving() ? 'bi-arrow-repeat spin' : (isEdit() ? 'bi-check-circle' : 'bi-plus-circle'))"></i>
            <span>{{ saving() ? 'Saving...' : isEdit() ? 'Update Product' : 'Add Product' }}</span>
          </button>
          <button type="button" class="btn btn-outline-secondary modern-btn-secondary" (click)="close()">
            <i class="bi bi-x-circle"></i>
            <span>Cancel</span>
          </button>
        </div>
      </div>
    </form>
  </div>
</div>